name: Notify events

on:
  workflow_call:
    inputs:
      release_tag:
        description: 'The unique release tag'
        type: string
        required: true
      job_status:
        description: 'Status of the current job'
        type: string
        # options: 
        # - started
        # - failed
        # - success
        required: true
        default: 'STARTED'
    secrets:
      TEAMS_WEBHOOK:
        required: true

jobs:
  port-job-logs-to-elastic:
    runs-on: ubuntu-latest

    steps:
    - name: Notify dedicated teams channel
      uses: jdcargile/ms-teams-notification@v1.4
      with:
        github-token: ${{ github.token }}
        ms-teams-webhook-uri: ${{ secrets.TEAMS_WEBHOOK }}
        notification-summary: Production release with release-id '${{ inputs.release_tag }}' initiated by '${{ github.actor }} has ${{ inputs.job_status }}'.
        # notification-summary: '<!DOCTYPE html>
        #                           <html>
        #                             <title>Production Release</title>
        #                             <body>
        #                               <ul>
        #                                 <li><b>Release Id:   </b>${{ inputs.release_tag }}</li>
        #                                 <li><b>Change Request Number: </b>Test</li>
        #                                 <li><b>Release Notes: </b>Test</li>
        #                                 <li><b>Started By: </b>${{ github.actor }}</li>
        #                                 <li><b>Started At: </b>Test</li>
        #                               <ul>
        #                             </body>
        #                           </html>'
        notification-color: 17a2b8
        timezone: Europe/Amsterdam
        verbose-logging: true

                

            